"use strict";(self.webpackChunkapp_cc=self.webpackChunkapp_cc||[]).push([[234],{566:(e,a,s)=>{s.r(a),s.d(a,{default:()=>O});var t=s(2791),r=s(97),l=s.n(r),i=s(6871),n=s(4619),o=s(1006),c=s(840),d=s(1649),h=s(7485),u=s(5409),x=s(1477),_=s(9757),j=s(9775),A=s(1595),m=s(4455),p=s(2967),g=s(5808);const S={grandArea:"style_grandArea__cta4b",_area_teclado:"style__area_teclado__ym741",webcam_area:"style_webcam_area__hwVYZ",cam:"style_cam__5xTln",area_header_info_patient:"style_area_header_info_patient__vVEv4",_area_photo_and_chapa:"style__area_photo_and_chapa__lgb2W",_area_inputs:"style__area_inputs__p-u9X",btn_save:"style_btn_save__88tWz",input_chapa:"style_input_chapa__HxPfy"};var C=s(184);const O=()=>{const{isOnline:e}=(0,n.c)(),a=(0,i.s0)(),s=(0,i.TH)(),r=(0,t.useRef)(null),O=(0,t.useRef)(null),[f,y]=(0,t.useState)([]),[D,b]=(0,t.useState)(""),[v,I]=(0,t.useState)(!1),[N,w]=(0,t.useState)(!1),[E,Z]=(0,t.useState)({}),[P,k]=(0,t.useState)(!1);let $;const[B,T]=(0,t.useState)(""),[R,U]=(0,t.useState)(!1),[L,V]=(0,t.useState)(!1),[z,F]=(0,t.useState)(!1);(0,t.useEffect)((()=>{Z({...s.state}),s.state?y(s.state):a("/")}),[s,D,a]);const M=async(e,a,s,t,r,l,i)=>{console.log("Entrou no imageSave");const n={image:`${e}`,badge:`${a}`,filename:`${l}`,user:`${s}`,aviso:`${t}`,etapa:`${r}`,autenticado:`${i}`},o=await H(n);console.log(JSON.stringify(o));try{await p.Z.post("/salvarHistoricoAutenticacao",n)}catch(c){console.log(`error imageSave: ${c}`)}},H=async e=>{const a=await p.Z.post("/uploadImage",e);console.log(a)},J=async(a,t)=>{if(k(!0),!e)return void alert("Voc\xea est\xe1 sem acesso \xe0 internet!");const r={imageSource:`${a}`,internCode:1,keyName:`${t}`,option:"compare",PAPEL_ACAO:156};try{const e=await p.Z.get(`/retornaCodUsuario?codchapa=${O.current.value}`);if(!e.data[0]){const e=(await p.Z.get(`/erroUserCracha/${t}`)).data;return k(!1),T(`${e}`),void U(!0)}const l=e.data[0].CD_USUARIO;$=await p.h.post("/rekognition/face",r),console.log($.data),console.log("dadosRedirect",E),console.log(l);const i=JSON.parse(localStorage.getItem("CAPP-local"));if(!1===$.data[0].resposta||$.data[0].user!==l)return void await(async(e,a,s,t,r,l,i,n)=>{switch(k(!1),console.log(`Entrou no handleError: ${JSON.stringify(e)}`),n){case 0:k(!1),V(!0);break;case 1:I(!0),await M(e,a,s,t,r,l,i)}})(a,t,$.data[0].user,s.state.DADOS.DADOS.COD_AVISO,null,`${t}_${$.data[0].user}_null_null`,"N",$.data[0].codigo);switch(s.state.TP_ACAO){case"ALTERAR_DATA_JEJUM":await(async(e,a,s,t,r,l,i)=>{k(!1),w(!0),await M(e,a,s,t,r,l,i)})(a,t,$.data[0].user,s.state.DADOS.DADOS.COD_AVISO,null,`${t}_${$.data[0].user}_null_null`,"S"),await G($.data[0].user,s.state.CHECKLIST),await q($.data[0].user);break;case"CANCELAR_CIRURGIA":await M(a,t,$.data[0].user,s.state.DADOS.DADOS.COD_AVISO,null,`${t}_${$.data[0].user}_SUSPCIRG_${(new Date).getTime()}`,"S"),await W(s.state.DADOS.DADOS.COD_AVISO,$.data[0].user,s.state.MOTIVO,i.CODIGO_SUBLOCALIDADE)}}catch(l){console.log(l)}},G=async(e,a)=>{try{const s=await p.Z.post("/insertRepostasChecklist",{questionsCheckList:a,Usuario:e});await s.data[0]&&console.log("Sucesso!")}catch(s){console.log(s)}},W=async(e,s,t,r)=>{const l=(await p.Z.post("/suspenderCirurgia",{CD_AVISO:e,CD_USUARIO:s,CD_AVISO_CANCELAMENTO:t,CD_SUB_LOCALIDADE:r})).data;console.log(l),l?(k(!1),w(!0),setTimeout((()=>a(-1)),3e3)):(k(!1),F(!0),setTimeout((()=>a(-1)),3e3))},q=async e=>{console.log(e),setTimeout(await(async()=>{a(-1)})(),8e4)},K=`Indu\xe7\xe3o L${JSON.parse(localStorage.getItem("CAPP-local")).SUBLOCALIDADE.split(" ")[1]}`;return(0,C.jsxs)(o.Z,{title:d.Q.INDUCAO_ASSINATURA_ALTERACOES.text,children:[(0,C.jsx)(_.Z,{titulo:K,localidade:"Assinatura Colaborador",children:(0,C.jsxs)(j.ZP,{children:[(0,C.jsx)(j.Z_,{children:(0,C.jsx)(u.Z,{color:"light",icon:"menu",isLight:!0,children:(0,C.jsx)("p",{children:" "})})}),(0,C.jsx)(j.h_,{children:(0,C.jsx)(j.hP,{onClick:()=>(localStorage.removeItem("CAPP-local"),void a("/")),children:"Alterar Local"})})]})}),(0,C.jsxs)(c.Z,{children:[(0,C.jsxs)("div",{className:S.container,children:[(0,C.jsx)("header",{children:(0,C.jsx)("div",{children:(0,C.jsx)(A.ZP,{className:S.area_header_info_patient,children:(0,C.jsxs)(A.eW,{children:[(0,C.jsx)("h3",{children:"Paciente"}),(0,C.jsx)("h1",{children:f.DADOS?f.DADOS.DADOS.PACIENTE:"- - "})]})})})}),(0,C.jsxs)("main",{className:S.grandArea,children:[(0,C.jsx)("div",{className:S._area_photo_and_chapa,children:(0,C.jsx)("div",{className:S.webcam_area,children:(0,C.jsx)(l(),{ref:r,className:S.cam,audio:!1,screenshotFormat:"image/jpeg",videoConstraints:{width:540,height:880,facingMode:"user"}})})}),(0,C.jsx)("div",{className:S._area_teclado,children:(0,C.jsxs)("div",{style:{padding:"1rem"},children:[(0,C.jsxs)("div",{style:{width:"400px"},children:[(0,C.jsx)("h2",{children:"Informe o c\xf3digo do crach\xe1"}),(0,C.jsx)(h.Z,{className:S.input_chapa,type:"number",disabled:!0,ref:O}),(0,C.jsx)("br",{})]}),(0,C.jsx)("div",{style:{width:"400px"},children:(0,C.jsx)(g.Z,{childToParent:e=>{const a=e;if("apagar"===a){const e=O.current.value.substring(0,O.current.value.length-1);O.current.value=e}else"zerar"===a?O.current.value="":(b(a),O.current.value+=a)}})}),(0,C.jsxs)("div",{className:S._area_inputs,children:[(0,C.jsx)("div",{children:(0,C.jsx)(u.Z,{className:S.btn_save,color:"success",icon:"user",onClick:()=>{const e=r.current.getScreenshot().replace("data:image/jpeg;base64,","");J(e,O.current.value)},children:"Assinar"})}),(0,C.jsx)("div",{children:(0,C.jsx)(m.Z,{onClick:()=>a(-1),icon:"reply",color:"#fff",size:"5x",forceFamily:"material"})})]})]})})]})]}),(0,C.jsxs)(x.ZP,{id:"example-modal",isCentered:!0,isAnimation:!1,isOpen:v,titleId:"example-title",children:[(0,C.jsx)(x.xB,{style:{backgroundColor:"#FE5B3A",color:"#fff"},children:(0,C.jsx)(x.r6,{id:"example-title",children:"AVISO"})}),(0,C.jsxs)(x.fe,{className:"ModalBody",children:[(0,C.jsxs)("h1",{children:["Usu\xe1rio n\xe3o encontrado",(0,C.jsx)("br",{})]}),"Por favor, tente novamente."]}),(0,C.jsx)(x.mz,{children:(0,C.jsx)(u.h,{isToolbar:"true",size:"lg",children:(0,C.jsx)(u.Z,{className:"btn-style",color:"success",icon:"done",onClick:()=>{I(!1)},children:"FECHAR"})})})]}),(0,C.jsxs)(x.ZP,{id:"sucess-modal",isCentered:!0,isAnimation:!1,isOpen:N,titleId:"example-titlea",children:[(0,C.jsx)(x.xB,{style:{backgroundColor:"#FE5B3A",color:"#fff"},children:(0,C.jsx)(x.r6,{id:"example-title",children:"AVISO"})}),(0,C.jsxs)(x.fe,{className:"ModalBody",children:[(0,C.jsx)("h1",{children:"ASSINADO COM SUCESSO!"}),(0,C.jsx)("br",{}),(0,C.jsx)("br",{})]})]}),(0,C.jsxs)(x.ZP,{isCentered:!0,isAnimation:!1,id:"modalAutorizacaoSusp",isOpen:z,titleId:"modalAutorizacaoSusp",children:[(0,C.jsx)(x.xB,{style:{backgroundColor:"#FE5B3A",color:"#fff"},children:(0,C.jsx)(x.r6,{id:"example-title",children:"ATEN\xc7\xc3O"})}),(0,C.jsxs)(x.fe,{className:"ModalBody",children:[(0,C.jsx)("h1",{children:"Voc\xea n\xe3o possui autoriza\xe7\xe3o para suspender essa cirurgia!"}),(0,C.jsx)("br",{}),(0,C.jsx)("br",{})]})]}),(0,C.jsxs)(x.ZP,{isCentered:!0,isAnimation:!1,id:"loading",isOpen:P,titleId:"loading",children:[(0,C.jsx)(x.xB,{style:{backgroundColor:"#636363",color:"#fff"},children:(0,C.jsx)(x.r6,{id:"example-title",children:"ASSINANDO..."})}),(0,C.jsxs)(x.fe,{className:"ModalBody",children:[(0,C.jsx)("br",{}),(0,C.jsx)("h1",{children:"Assinando...Por favor, aguarde..."}),(0,C.jsx)("br",{}),(0,C.jsx)("br",{})]})]}),(0,C.jsxs)(x.ZP,{isCentered:!0,isAnimation:!1,isOpen:R,children:[(0,C.jsx)(x.xB,{style:{backgroundColor:"#FE5B3A",color:"#fff"},children:(0,C.jsx)(x.r6,{id:"example-title",children:"AVISO"})}),(0,C.jsxs)(x.fe,{className:"ModalBody",children:[(0,C.jsx)("h1",{children:B}),(0,C.jsx)("br",{})]}),(0,C.jsx)(x.mz,{children:(0,C.jsx)(u.h,{isToolbar:"true",size:"lg",children:(0,C.jsx)(u.Z,{className:"btn-style",color:"light",onClick:()=>U(!1),children:"FECHAR"})})})]}),(0,C.jsxs)(x.ZP,{isCentered:!0,isAnimation:!1,isOpen:L,children:[(0,C.jsx)(x.xB,{style:{backgroundColor:"#FE5B3A",color:"#fff"},children:(0,C.jsx)(x.r6,{id:"example-title",children:"AVISO"})}),(0,C.jsxs)(x.fe,{className:"ModalBody",children:[(0,C.jsxs)("h1",{children:["Face n\xe3o cadastrada!",(0,C.jsx)("br",{})]}),(0,C.jsx)("h3",{children:"Por favor, realize o cadastro e tente novamente."})]}),(0,C.jsx)(x.mz,{children:(0,C.jsx)(u.h,{isToolbar:"true",size:"lg",children:(0,C.jsx)(u.Z,{className:"btn-style",color:"light",onClick:()=>V(!1),children:"FECHAR"})})})]})]})]})}}}]);
//# sourceMappingURL=234.2a1db528.chunk.js.map